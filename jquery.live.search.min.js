jQuery.fn.reverse=[].reverse;!function($){"use strict";$.liveSearch=function(options){var opts=$.extend({},$.liveSearch.defaults,options);var _self=this;var selectorToSearch;var textElement;function init(){if(opts.remote){selectorToSearch=opts.selectorContainer+" "+opts.selectorElementsToSearch}else{selectorToSearch=opts.selectorContainer+" "+opts.selectorElementsToSearch}bindInputSearch();preventSubmit();return _self}var bindInputSearch=function(){$(opts.selectorInputSearch).bind("keyup blur",function(){textElement=$(this).val();if(this.timer){clearTimeout(this.timer)}this.timer=setTimeout(function(){initFilter()},opts.typeDelay)})};var initFilter=function(){if(textElement.length>=opts.minCharacters){if(opts.ajaxCallback){opts.ajaxCallback.call(this)}else{filterElements(textElement)}}else if(textElement.length===0){if(opts.ajaxCallback){opts.ajaxCallback.call(this)}else{resetFilter()}}};var preventSubmit=function(){$(opts.selectorInputSearch).keydown(function(e){if(e.keyCode===13){return false}})};var filterElements=function(textElement){var pattern=new RegExp(textElement,"igm");if(opts.selectorToHide&&opts.selectorElementsToSearch!==opts.selectorToHide){$(selectorToSearch).parents(opts.selectorToHide).not(opts.selectorFixed).hide();$(selectorToSearch).filter(function(){var content=$(this).html();return content.match(pattern)}).parents(opts.selectorToHide).show();if(opts.selectorHead){var nextHide=true;$(opts.selectorContainer).find(opts.selectorHead+","+opts.selectorToHide).reverse().each(function(){if($(this).is(opts.selectorToHide)){if($(this).is(":visible")){nextHide=false}}if($(this).is(opts.selectorHead)){if(nextHide){$(this).hide()}else{$(this).show();nextHide=true}}})}}else{$(selectorToSearch).not(opts.selectorFixed).hide();$(selectorToSearch).filter(function(){var content=$(this).html();return content.match(pattern)}).show()}};var filterAjax=function(page){$(opts.selectorContainer).find(opts.selectorToHide).remove();var items=[],container;container=$(opts.selectorContainer,page).eq(0);if(0===container.length){container=$(page).filter(opts.selectorContainer).eq(0)}if(container){container.find(opts.selectorToHide).each(function(){items.push(this)})}$(opts.selectorContainer).append(items);filterElements(textElement)};var resetFilter=function(){if(opts.selectorToHide){$(opts.selectorContainer).find(opts.selectorToHide).show()}else{$(selectorToSearch).show()}if(opts.selectorHead){$(opts.selectorContainer).find(opts.selectorHead).show()}};this.reFilter=function(){filterElements(textElement)};this.ajaxDone=function(data,search_query){if(search_query===textElement){filterAjax(data,search_query)}};this.getInputSearchVal=function(){return textElement};return init()};$.liveSearch.defaults={attributeToSearch:"data-search",selectorContainer:"table",selectorElementsToSearch:"td",selectorInputSearch:"input#search_query",selectorHead:false,selectorToHide:false,minCharacters:3,typeDelay:500,ajaxCallback:false}}(jQuery);